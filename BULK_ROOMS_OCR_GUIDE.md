# دليل إضافة الغرف بالجملة عبر OCR
## Bulk Room Addition via OCR Guide

### 🎯 نظرة عامة | Overview

تم إضافة ميزة جديدة تتيح **إضافة مجموعة غرف دفعة واحدة** من خلال تصوير قائمة الغرف والنظام يقرأها تلقائياً! 

يدعم النظام قراءة:
- ✅ **أرقام الغرف** (مثل: 101، 201، 303، إلخ)
- ✅ **أنواع الغرف** (شقة، غرفة وصالة، غرفتين، جناح، VIP، إلخ)
- ✅ **عدد غير محدود** من الغرف في صورة واحدة

---

## 🚀 كيفية الاستخدام | How to Use

### الخطوات | Steps:

1. **افتح صفحة إدارة الغرف**
   - Dashboard → إدارة الشقق

2. **اضغط على زر "إضافة غرف من صورة"**
   - الزر البنفسجي بجانب "إضافة نزيل"

3. **ارفع صورة قائمة الغرف**
   - التقط صورة واضحة للقائمة
   - أو ارفع صورة موجودة من الجهاز

4. **انتظر المعالجة**
   - سيظهر شريط التقدم
   - يقرأ النظام أرقام الغرف وأنواعها

5. **راجع النتائج**
   - ستظهر قائمة بالغرف المستخرجة
   - علامة ✓ خضراء للغرف الصالحة
   - تحذير أحمر إذا كانت الغرفة موجودة مسبقاً

6. **أكّد الإضافة**
   - اضغط "إضافة X غرفة"
   - سيتم إضافة جميع الغرف دفعة واحدة

---

## 📋 أنواع الغرف المدعومة | Supported Room Types

النظام يتعرف تلقائياً على الأنواع التالية:

### باللغة العربية | Arabic:
| النص في الصورة | سيتم حفظه كـ |
|---------------|--------------|
| شقة | شقة |
| غرفة | غرفة |
| غرفه | غرفة |
| غرفة وصالة | غرفة وصالة |
| غرفه وصاله | غرفة وصالة |
| غرفتين | غرفتين |
| غرفتين وصالة | غرفتين وصالة |
| جناح | جناح |
| جنا | جناح |
| استوديو | استوديو |
| أسرة | غرفة |

### باللغة الإنجليزية | English:
| النص في الصورة | سيتم حفظه كـ |
|---------------|--------------|
| vip | VIP |
| VIP | VIP |
| ڤی پی | VIP |
| فيب | VIP |

---

## 📸 نصائح للحصول على أفضل نتائج | Tips for Best Results

### للتصوير | For Photography:
1. **إضاءة واضحة** ☀️
   - تأكد من إضاءة جيدة
   - تجنب الظلال

2. **تصوير مستقيم** 📐
   - صوّر من الأعلى مباشرة
   - تجنب الزوايا المائلة

3. **وضوح النص** 🔍
   - تأكد من أن الأرقام واضحة
   - الخط الكبير أفضل

4. **تباين جيد** ⚫⚪
   - خلفية فاتحة + نص داكن (أو العكس)
   - تجنب الألوان المتشابهة

### للمحتوى | For Content:
- ✅ **رقم الغرفة يجب أن يكون 3-4 أرقام** (مثل: 101، 2503)
- ✅ **النوع بجانب الرقم أو أسفله**
- ✅ **يمكن تصوير قوائم طويلة** (عشرات الغرف)
- ❌ **تجنب الكتابة اليدوية غير الواضحة**

---

## 🎨 أمثلة على تنسيقات مدعومة | Supported Formats Examples

### التنسيق 1: رقم + نوع في نفس السطر
```
101 vip
102 غرفة وصالة
103 شقة
201 جناح
```

### التنسيق 2: رقم ثم نوع في السطر التالي
```
101
vip

102
غرفة وصالة

103
شقة
```

### التنسيق 3: قائمة بطاقات الغرف (مثل الصورة المرفقة)
```
┌─────────────┐
│ 101         │
│ غرفة وصالة  │
└─────────────┘

┌─────────────┐
│ 102         │
│ شقة         │
└─────────────┘
```

---

## 🔍 ماذا يحدث خلف الكواليس؟ | What Happens Behind the Scenes?

1. **قراءة الصورة بـ Tesseract OCR**
   - يستخرج جميع النصوص العربية والإنجليزية

2. **البحث عن أرقام الغرف**
   - يبحث عن أرقام 3-4 أرقام
   - يتحقق من أنها في النطاق المعقول (101-999)

3. **تطابق أنواع الغرف**
   - يبحث عن الكلمات المفتاحية
   - يطبّع الكتابة (غرفه → غرفة)

4. **منع التكرار**
   - يتحقق من عدم وجود الغرفة مسبقاً
   - يعرض تحذير إذا كانت موجودة

5. **الإضافة الجماعية**
   - يضيف جميع الغرف دفعة واحدة
   - يسجّل حدث "تم إنشاء الغرفة من الصورة"

---

## 📊 البيانات التي يتم حفظها | Data That Gets Saved

عند إضافة غرفة، يتم حفظ:

| الحقل | القيمة |
|------|--------|
| رقم الغرفة | من الصورة |
| النوع | من الصورة (مع التطبيع) |
| الدور | يحسب تلقائياً (مثلاً: 201 = الدور 2) |
| الحالة | "متاحة" افتراضياً |
| الرصيد | 0 ر.س |
| السجل | "تم إنشاء الغرفة من الصورة" |
| التاريخ | وقت الإضافة |
| بواسطة | اسم الموظف |

---

## 🔧 حل المشاكل | Troubleshooting

### المشكلة: لم يتم اكتشاف أي غرف
**الحلول | Solutions:**
1. تحقق من وضوح الصورة
2. تأكد من وجود أرقام 3-4 أرقام
3. حاول زيادة حجم الخط في الصورة
4. أعد التقاط الصورة بإضاءة أفضل

### المشكلة: تم قراءة الرقم خطأ
**الحلول | Solutions:**
1. تأكد من وضوح الأرقام
2. استخدم خط واضح (Arial، Tahoma، إلخ)
3. تجنب الأرقام المتشابهة (0 و O، 1 و l)

### المشكلة: لم يتعرف على نوع الغرفة
**الحلول | Solutions:**
1. تحقق من الجدول أعلاه للأنواع المدعومة
2. استخدم الكلمات المفتاحية الصحيحة
3. يمكنك تعديل النوع يدوياً بعد الإضافة

### المشكلة: الغرفة موجودة مسبقاً
**الحل | Solution:**
- هذا تحذير وليس خطأ
- النظام يمنع تكرار أرقام الغرف
- لن يتم إضافة الغرفة المكررة تلقائياً

---

## 💡 حالات الاستخدام | Use Cases

### حالة 1: فندق جديد
- صوّر قائمة جميع الغرف
- ارفع الصورة
- أضف 50+ غرفة في دقائق!

### حالة 2: جناح جديد
- صوّر قائمة الغرف في الجناح الجديد
- أضفها بسرعة دون إدخال يدوي

### حالة 3: تحديث الأنواع
- صوّر قائمة محدثة
- النظام سيتجاهل الغرف الموجودة
- يضيف فقط الغرف الجديدة

---

## 🎯 الفرق بين الميزات | Difference Between Features

| الميزة | إضافة نزيل | إضافة غرف من صورة |
|--------|-----------|-------------------|
| **الغرض** | تسجيل دخول نزيل | إنشاء غرف جديدة |
| **الزر** | أخضر | بنفسجي |
| **المدخلات** | نموذج نزيل Nazeel | قائمة غرف |
| **المخرجات** | غرفة واحدة → مشغولة | عدة غرف → متاحة |
| **الوقت** | 1-2 دقيقة للنزيل | 10 ثوان لـ 50 غرفة |

---

## 📈 الإحصائيات | Statistics

بعد إضافة الغرف:
- ✅ يتم تحديث عداد "عرض الكل"
- ✅ تظهر الغرف في القائمة الرئيسية
- ✅ الحالة الافتراضية: "متاحة" (أخضر)
- ✅ يمكن تغيير الحالة والإعدادات لاحقاً

---

## 🔐 الصلاحيات | Permissions

من يستطيع إضافة غرف؟
- ✅ **المدير** (Admin)
- ✅ **المشرف** (Supervisor)
- ❌ الموظفين العاديين (يحتاجون صلاحية)

---

## 🎓 أمثلة عملية | Practical Examples

### مثال 1: فندق صغير (20 غرفة)
```
الوقت بالطريقة اليدوية: 20 × 1 دقيقة = 20 دقيقة
الوقت بـ OCR: تصوير + رفع = 30 ثانية
الوفر: 95% من الوقت! ⚡
```

### مثال 2: فندق كبير (100 غرفة)
```
الوقت بالطريقة اليدوية: 100 × 1 دقيقة = 100 دقيقة (1.7 ساعة)
الوقت بـ OCR: تصوير + رفع = 2 دقيقة
الوفر: 98% من الوقت! 🚀
```

---

## 🛠️ التقنيات المستخدمة | Technologies Used

- **Tesseract.js** - محرك OCR
- **React + TypeScript** - الواجهة
- **localStorage** - التخزين المحلي
- **Regex Patterns** - لتطابق الأرقام والأنواع
- **Smart Normalization** - لتوحيد الكتابة

---

## 🔄 التحديثات المستقبلية | Future Updates

قريباً:
- 🔜 تعديل الأنواع بعد الاستخراج
- 🔜 دعم أنواع غرف إضافية
- 🔜 حفظ القوالب المفضلة
- 🔜 استيراد من Excel/CSV

---

## ✨ نصيحة ذهبية | Golden Tip

> **للحصول على أفضل النتائج:**
> استخدم قالب Excel أو Word لطباعة قائمة الغرف بخط واضح كبير، ثم صوّرها!
> سيوفر عليك ساعات من الإدخال اليدوي 💎

---

## 📞 الدعم | Support

إذا واجهت أي مشكلة:
1. تحقق من قسم "حل المشاكل" أعلاه
2. راجع الأمثلة
3. جرب إعادة التصوير بإضاءة أفضل
4. استخدم الإدخال اليدوي للغرف القليلة

---

**تم التحديث:** يناير 2025
**الإصدار:** 2.0

✨ **استمتع بتوفير الوقت مع OCR!** ✨
