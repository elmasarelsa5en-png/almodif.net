<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± ØµÙˆØª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            text-align: center;
            max-width: 500px;
            width: 100%;
        }
        h1 {
            color: #667eea;
            margin-bottom: 30px;
            font-size: 2em;
        }
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 20px 40px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin: 10px;
            font-weight: bold;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .btn:active {
            transform: translateY(0);
        }
        .status {
            margin-top: 30px;
            padding: 20px;
            border-radius: 10px;
            background: #f0f0f0;
            font-size: 1.1em;
        }
        .success {
            background: #d4edda;
            color: #155724;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”Š Ø§Ø®ØªØ¨Ø§Ø± ØµÙˆØª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h1>
        
        <button class="btn" onclick="playSound()">
            â–¶ï¸ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª
        </button>
        
        <button class="btn" onclick="testMaxVolume()">
            ğŸ”Š Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ø£Ù‚ØµÙ‰ ØµÙˆØª
        </button>
        
        <button class="btn" onclick="testLoop()">
            ğŸ” ØªØ´ØºÙŠÙ„ Ù…ØªÙƒØ±Ø± (3 Ù…Ø±Ø§Øª)
        </button>
        
        <div id="status" class="status" style="display:none;"></div>
        
        <div class="info">
            <strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong><br>
            - ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø¯Ù… ÙƒØªÙ… Ø§Ù„ØµÙˆØª<br>
            - Ø¨Ø¹Ø¶ Ø§Ù„Ù…ØªØµÙØ­Ø§Øª ØªØ­ØªØ§Ø¬ ØªÙØ§Ø¹Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£ÙˆÙ„Ø§Ù‹<br>
            - Ù…Ù„Ù Ø§Ù„ØµÙˆØª: /notification.mp3<br>
            - Ø§Ù„Ù…Ø¯Ø©: 3 Ø«ÙˆØ§Ù†<br>
            - Ø§Ù„ØµÙˆØª: Ø¹Ø§Ù„ÙŠ Ø¬Ø¯Ø§Ù‹
        </div>
    </div>

    <audio id="audioPlayer" src="/notification.mp3" preload="auto"></audio>

    <script>
        const audioPlayer = document.getElementById('audioPlayer');
        const statusDiv = document.getElementById('status');

        function showStatus(message, isSuccess = true) {
            statusDiv.style.display = 'block';
            statusDiv.textContent = message;
            statusDiv.className = isSuccess ? 'status success' : 'status error';
        }

        function playSound() {
            console.log('ğŸ”Š Playing notification sound...');
            
            // Ø¥Ù†Ø´Ø§Ø¡ audio Ø¬Ø¯ÙŠØ¯
            const audio = new Audio('/notification.mp3');
            audio.volume = 1.0; // Ø£Ù‚ØµÙ‰ ØµÙˆØª
            
            const playPromise = audio.play();
            
            if (playPromise !== undefined) {
                playPromise
                    .then(() => {
                        console.log('âœ… Sound played successfully!');
                        showStatus('âœ… ØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª Ø¨Ù†Ø¬Ø§Ø­!', true);
                    })
                    .catch(error => {
                        console.error('âŒ Failed to play:', error);
                        showStatus('âŒ ÙØ´Ù„ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª: ' + error.message, false);
                    });
            }
        }

        function testMaxVolume() {
            console.log('ğŸ”Š Testing with maximum volume...');
            
            const audio = new Audio('/notification.mp3');
            audio.volume = 1.0; // 100%
            
            audio.play()
                .then(() => {
                    showStatus('âœ… Ø§Ù„ØµÙˆØª ÙŠØ¹Ù…Ù„ Ø¨Ø£Ù‚ØµÙ‰ Ø§Ø±ØªÙØ§Ø¹!', true);
                })
                .catch(error => {
                    showStatus('âŒ Ø®Ø·Ø£: ' + error.message, false);
                });
        }

        function testLoop() {
            console.log('ğŸ” Testing with loop (3 times)...');
            
            let playCount = 0;
            const maxPlays = 3;
            
            function playNext() {
                if (playCount < maxPlays) {
                    const audio = new Audio('/notification.mp3');
                    audio.volume = 1.0;
                    
                    audio.onended = () => {
                        playCount++;
                        showStatus(`ğŸ”Š ØªÙ… Ø§Ù„ØªØ´ØºÙŠÙ„ ${playCount} Ù…Ù† ${maxPlays}`, true);
                        if (playCount < maxPlays) {
                            setTimeout(playNext, 500); // ØªÙˆÙ‚Ù Ù†ØµÙ Ø«Ø§Ù†ÙŠØ© Ø¨ÙŠÙ† ÙƒÙ„ ØªØ´ØºÙŠÙ„
                        } else {
                            showStatus('âœ… Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±! ØªÙ… Ø§Ù„ØªØ´ØºÙŠÙ„ 3 Ù…Ø±Ø§Øª', true);
                        }
                    };
                    
                    audio.play().catch(error => {
                        showStatus('âŒ Ø®Ø·Ø£: ' + error.message, false);
                    });
                }
            }
            
            playNext();
        }

        // Ø§Ø®ØªØ¨Ø§Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ (Ø¨Ø¹Ø¯ ØªÙØ§Ø¹Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…)
        document.addEventListener('click', function firstClick() {
            console.log('ğŸ‘† First user interaction detected');
            document.removeEventListener('click', firstClick);
        }, { once: true });
    </script>
</body>
</html>
