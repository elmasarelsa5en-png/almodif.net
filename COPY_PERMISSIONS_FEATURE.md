# 📋 ميزة نسخ الصلاحيات بين الموظفين

## 🎯 نظرة عامة

تم إضافة ميزة جديدة تتيح **نسخ الصلاحيات من موظف إلى آخر** بنقرة واحدة، مما يوفر الوقت ويقلل الأخطاء.

---

## ✨ كيفية الاستخدام

### الطريقة:

1. **اذهب إلى صفحة الموارد البشرية**
   ```
   Dashboard → الإعدادات → الموارد البشرية
   ```

2. **اختر الموظف المستهدف** (الذي تريد نسخ الصلاحيات إليه)

3. **اضغط على أيقونة النسخ** 🟢 (زر Copy الأخضر)

4. **اختر الموظف المصدر** من القائمة المنسدلة
   - يعرض اسم كل موظف مع عدد صلاحياته
   - مثال: `أكرم (@akram) - 82 صلاحية`

5. **اضغط "نسخ الصلاحيات"**
   - سيتم نسخ جميع صلاحيات الموظف المصدر
   - رسالة تأكيد: `✅ تم نسخ 82 صلاحية من أكرم إلى محمد`

---

## 🎨 شكل الواجهة

### زر النسخ في قائمة الموظفين:

```
[موظف]  [أزرار التحكم]
- 🔵 تعديل (Edit)
- 🟢 نسخ الصلاحيات (Copy) ← جديد!
- 🔴 حذف (Delete)
```

### نافذة نسخ الصلاحيات:

```
┌─────────────────────────────────┐
│  🟢 نسخ الصلاحيات              │
├─────────────────────────────────┤
│  الموظف المستهدف:              │
│  👤 محمد (@mohammed)            │
│  الصلاحيات الحالية: 15          │
├─────────────────────────────────┤
│  اختر الموظف المصدر:           │
│  ▼ اختر موظف...                │
│     أكرم (@akram) - 82 صلاحية  │
│     شاكر (@shaker) - 45 صلاحية │
│     علي (@ali) - 20 صلاحية      │
├─────────────────────────────────┤
│  ✅ سيتم نسخ 82 صلاحية من أكرم │
├─────────────────────────────────┤
│  [إلغاء]  [🟢 نسخ الصلاحيات]  │
└─────────────────────────────────┘
```

---

## 💡 أمثلة عملية

### مثال 1: موظف استقبال جديد

**المشكلة:** أضفت موظف استقبال جديد واسمه "خالد"، وتريد إعطاءه نفس صلاحيات "محمد" (موظف الاستقبال القديم).

**الحل:**
1. اضغط زر Copy 🟢 بجانب "خالد"
2. اختر "محمد" من القائمة
3. اضغط "نسخ الصلاحيات"
4. ✅ تم! خالد الآن لديه نفس صلاحيات محمد

---

### مثال 2: ترقية موظف

**المشكلة:** موظف الاستقبال "علي" تمت ترقيته لمشرف، وتريد إعطاءه صلاحيات المشرف.

**الحل:**
1. اضغط زر Copy 🟢 بجانب "علي"
2. اختر "شاكر" (المشرف) من القائمة
3. اضغط "نسخ الصلاحيات"
4. ✅ علي الآن لديه صلاحيات المشرف!

---

### مثال 3: إنشاء نسخة احتياطية للصلاحيات

**المشكلة:** تريد إنشاء موظف احتياطي بنفس صلاحيات المدير.

**الحل:**
1. أنشئ موظف جديد "مدير احتياطي"
2. اضغط Copy 🟢 بجانبه
3. اختر "أكرم" (المدير الأساسي)
4. ✅ الموظف الاحتياطي جاهز بكل الصلاحيات!

---

## 📊 الإحصائيات والتتبع

### التسجيل في Audit Log:

كل عملية نسخ صلاحيات يتم تسجيلها:

```
🔄 UPDATE
📁 الموظفين
📝 تم تعديل بيانات الموظف: محمد
📋 التغييرات:
   - الصلاحيات: من 15 صلاحية → إلى 82 صلاحية (منسوخة من أكرم)
👤 بواسطة: akram
📅 التاريخ: 29/10/2025
🕐 الوقت: 10:30 ص
```

---

## ⚠️ ملاحظات هامة

### 1. لا يمكن نسخ الصلاحيات من نفس الموظف
```
❌ لا يمكن نسخ الصلاحيات من نفس الموظف
```

### 2. النسخ يستبدل الصلاحيات الحالية
- الصلاحيات القديمة للموظف المستهدف سيتم **استبدالها** بالكامل
- **ليس إضافة**، بل **استبدال كامل**

### 3. يمكن التراجع
- يمكنك دائماً تعديل الصلاحيات بعد النسخ
- أو نسخ صلاحيات من موظف آخر

---

## 🎯 الفوائد

### ⏱️ توفير الوقت
بدلاً من:
- ✅ تحديد 82 صلاحية يدوياً (10 دقائق)
الآن:
- ✅ 3 نقرات فقط (10 ثواني)

### 🎯 تقليل الأخطاء
- لا مزيد من نسيان صلاحيات مهمة
- ضمان تطابق الصلاحيات بين الموظفين في نفس الدور

### 📋 سهولة الإدارة
- إنشاء موظفين جدد أسرع
- ترقية الموظفين بسهولة
- إنشاء نسخ احتياطية للأدوار

---

## 🔧 التطوير المستقبلي

### أفكار محتملة:

1. **نسخ جزئي للصلاحيات**
   - نسخ صلاحيات فئة معينة فقط
   - مثال: نسخ صلاحيات "الغرف" فقط

2. **قوالب صلاحيات جاهزة**
   - حفظ مجموعات صلاحيات كقوالب
   - مثال: "قالب موظف استقبال"، "قالب مشرف"

3. **نسخ متعدد**
   - نسخ الصلاحيات لعدة موظفين دفعة واحدة

---

## 📞 الدعم

إذا واجهت أي مشكلة:
1. تحقق من اتصالك بـ Firebase
2. تأكد من وجود صلاحيات للموظف المصدر
3. راجع Audit Log للتأكد من نجاح العملية

---

**تم إضافة الميزة في:** Commit `1f7b164`
**التاريخ:** 29 أكتوبر 2025
